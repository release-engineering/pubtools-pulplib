
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>API: searching &#8212; pubtools-pulplib  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API: testing" href="testing.html" />
    <link rel="prev" title="API: maintenance" href="maintenance.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="api-searching">
<h1>API: searching<a class="headerlink" href="#api-searching" title="Permalink to this headline">¶</a></h1>
<section id="model-vs-pulp-fields">
<span id="model-fields"></span><h2>Model vs Pulp fields<a class="headerlink" href="#model-vs-pulp-fields" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
<p>The <a class="reference internal" href="#pubtools.pulplib.Criteria" title="pubtools.pulplib.Criteria"><code class="xref py py-class docutils literal notranslate"><span class="pre">Criteria</span></code></a> and <a class="reference internal" href="#pubtools.pulplib.Matcher" title="pubtools.pulplib.Matcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">Matcher</span></code></a>
classes are able to operate on two types of fields:</p>
<ul class="simple">
<li><p>Model fields: fields documented on the <a class="reference internal" href="pulpcore.html#pubtools.pulplib.PulpObject" title="pubtools.pulplib.PulpObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">PulpObject</span></code></a>
class hierarchy.  <code class="docutils literal notranslate"><span class="pre">eng_product_id</span></code> from the
<a class="reference internal" href="pulpcore.html#pubtools.pulplib.Repository" title="pubtools.pulplib.Repository"><code class="xref py py-class docutils literal notranslate"><span class="pre">Repository</span></code></a> class is an example of a model field.</p></li>
<li><p>Pulp fields: any arbitrary fields within the Pulp 2.x database.
<code class="docutils literal notranslate"><span class="pre">notes.eng_product</span></code> is an example of a Pulp field.</p></li>
</ul>
<p>Generally, searching on model fields should be preferred when possible,
as this allows your code to avoid a dependency on Pulp implementation details
and allows you to use the same field names everywhere.</p>
<p>However, not all model fields support this, as not every model field has
a direct mapping with a Pulp field.  Attempting to search on an unsupported
model field will raise an exception.</p>
</section>
<section id="class-reference">
<h2>Class reference<a class="headerlink" href="#class-reference" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pubtools.pulplib.Criteria">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pubtools.pulplib.</span></span><span class="sig-name descname"><span class="pre">Criteria</span></span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Criteria"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Criteria" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a Pulp search criteria.</p>
<p>This is an opaque class which is not intended to be created
or used directly. Instances of this class should be obtained and
composed by calls to the documented class methods.</p>
<dl>
<dt>Example - searching a repository:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># With Pulp 2.x / mongo, this is roughly equivalent</span>
<span class="c1"># to search fragment:</span>
<span class="c1">#</span>
<span class="c1">#  {&quot;notes.my-field&quot;: {&quot;$exists&quot;: True},</span>
<span class="c1">#   &quot;notes.other-field&quot;: {&quot;$eq&quot;: [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]}}</span>
<span class="c1">#</span>
<span class="n">crit</span> <span class="o">=</span> <span class="n">Criteria</span><span class="o">.</span><span class="n">and_</span><span class="p">(</span>
    <span class="n">Criteria</span><span class="o">.</span><span class="n">with_field</span><span class="p">(</span><span class="s1">&#39;notes.my-field&#39;</span><span class="p">,</span> <span class="n">Matcher</span><span class="o">.</span><span class="n">exists</span><span class="p">()),</span>
    <span class="n">Criteria</span><span class="o">.</span><span class="n">with_field</span><span class="p">(</span><span class="s1">&#39;notes.other-field&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>
<span class="p">)</span>

<span class="c1"># criteria may now be used with client to execute a search</span>
<span class="n">repos</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">search_repository</span><span class="p">(</span><span class="n">crit</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Example - searching across all repos for a specific content type:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">crit</span> <span class="o">=</span> <span class="n">Criteria</span><span class="o">.</span><span class="n">and_</span><span class="p">(</span>
    <span class="n">Criteria</span><span class="o">.</span><span class="n">with_unit_type</span><span class="p">(</span><span class="n">RpmUnit</span><span class="p">),</span>
    <span class="n">Criteria</span><span class="o">.</span><span class="n">with_field</span><span class="p">(</span><span class="s2">&quot;sha256sum&quot;</span><span class="p">,</span> <span class="n">Matcher</span><span class="o">.</span><span class="n">in_</span><span class="p">([</span>
        <span class="s2">&quot;49ae93732fcf8d63fe1cce759664982dbd5b23161f007dba8561862adc96d063&quot;</span><span class="p">,</span>
        <span class="s2">&quot;6b30e91df993d96df0bef0f9d232d1068fa2f7055f13650208d77b43cd7c99f6&quot;</span><span class="p">])))</span>

<span class="c1"># Will find RpmUnit instances with above sums</span>
<span class="n">units</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">search_content</span><span class="p">(</span><span class="n">crit</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pubtools.pulplib.Criteria.with_id">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">with_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Criteria.with_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Criteria.with_id" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ids</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>]</em>) – An id or list of ids</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Criteria</dt><dd><p>criteria for finding objects matching the given ID(s)</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools.pulplib.Criteria.with_field">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">with_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">field_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Criteria.with_field"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Criteria.with_field" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <p>The name of a field.</p>
<p>Supported field names include both model fields
and Pulp fields.  See <a class="reference internal" href="#model-fields"><span class="std std-ref">Model vs Pulp fields</span></a> for information
about these two types of fields.</p>
<p>When Pulp fields are used, field names may contain a “.” to
indicate nesting, such as <code class="docutils literal notranslate"><span class="pre">notes.created</span></code>.</p>
</p></li>
<li><p><strong>field_value</strong> – <dl class="simple">
<dt><a class="reference internal" href="#pubtools.pulplib.Matcher" title="pubtools.pulplib.Matcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">Matcher</span></code></a></dt><dd><p>A matcher to be applied against the field.</p>
</dd>
<dt>object</dt><dd><p>Any value, to be matched against the field via
<a class="reference internal" href="#pubtools.pulplib.Matcher.equals" title="pubtools.pulplib.Matcher.equals"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Matcher.equals()</span></code></a>.</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Criteria</dt><dd><p>criteria for finding objects where <code class="docutils literal notranslate"><span class="pre">field_name</span></code> is present and
matches <code class="docutils literal notranslate"><span class="pre">field_value</span></code>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools.pulplib.Criteria.with_unit_type">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">with_unit_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Criteria.with_unit_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Criteria.with_unit_type" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>unit_type</strong> (<em>class</em>) – A subclass of <a class="reference internal" href="pulpcore.html#pubtools.pulplib.Unit" title="pubtools.pulplib.Unit"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unit</span></code></a>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Criteria</dt><dd><p>criteria for finding units of type <code class="docutils literal notranslate"><span class="pre">unit_type</span></code>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.14.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools.pulplib.Criteria.and_">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">and_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">criteria</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Criteria.and_"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Criteria.and_" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>criteria</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>[</em><a class="reference internal" href="#pubtools.pulplib.Criteria" title="pubtools.pulplib.Criteria"><em>Criteria</em></a><em>]</em>) – Any number of criteria.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt><a class="reference internal" href="#pubtools.pulplib.Criteria" title="pubtools.pulplib.Criteria"><code class="xref py py-class docutils literal notranslate"><span class="pre">Criteria</span></code></a></dt><dd><p>criteria for finding objects which satisfy all of the input <code class="docutils literal notranslate"><span class="pre">criteria</span></code>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools.pulplib.Criteria.or_">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">or_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">criteria</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Criteria.or_"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Criteria.or_" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>criteria</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>[</em><a class="reference internal" href="#pubtools.pulplib.Criteria" title="pubtools.pulplib.Criteria"><em>Criteria</em></a><em>]</em>) – Any number of criteria.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Criteria</dt><dd><p>criteria for finding objects which satisfy any of the input <code class="docutils literal notranslate"><span class="pre">criteria</span></code>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools.pulplib.Criteria.true">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">true</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Criteria.true"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Criteria.true" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Criteria</dt><dd><p>a criteria which always matches any object.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pubtools.pulplib.Matcher">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pubtools.pulplib.</span></span><span class="sig-name descname"><span class="pre">Matcher</span></span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Matcher"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Matcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Methods for matching fields within a Pulp search query.</p>
<p>Instances of this class are created by the documented class methods,
and should be used in conjunction with <a class="reference internal" href="#pubtools.pulplib.Criteria" title="pubtools.pulplib.Criteria"><code class="xref py py-class docutils literal notranslate"><span class="pre">Criteria</span></code></a> methods, such
as <a class="reference internal" href="#pubtools.pulplib.Criteria.with_field" title="pubtools.pulplib.Criteria.with_field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Criteria.with_field()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.1.0.</span></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="pubtools.pulplib.Matcher.equals">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">equals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Matcher.equals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Matcher.equals" title="Permalink to this definition">¶</a></dt>
<dd><p>Matcher for a field which must equal exactly the given value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – An object to match against a field.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools.pulplib.Matcher.regex">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">regex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Matcher.regex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Matcher.regex" title="Permalink to this definition">¶</a></dt>
<dd><p>Matcher for a field which must be a string and must match the given
regular expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pattern</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <p>A regular expression to match against the field.
The expression is not implicitly anchored.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is not defined which specific regular expression syntax is
supported. For portable code, callers are recommended to use
only the common subset of PCRE-compatible and Python-compatible
regular expressions.</p>
</div>
</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/re.html#re.error" title="(in Python v3.10)"><strong>re.error</strong></a> – If the given pattern is not a valid regular expression.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Would match any Repository where notes.my-field starts</span>
<span class="c1"># with &quot;abc&quot;</span>
<span class="n">crit</span> <span class="o">=</span> <span class="n">Criteria</span><span class="o">.</span><span class="n">with_field</span><span class="p">(</span><span class="s1">&#39;notes.my-field&#39;</span><span class="p">,</span> <span class="n">Matcher</span><span class="o">.</span><span class="n">regex</span><span class="p">(</span><span class="s2">&quot;^abc&quot;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools.pulplib.Matcher.exists">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">exists</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Matcher.exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Matcher.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Matcher for a field which must exist, with no specific value.</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Would match any Repository where notes.my-field exists</span>
<span class="n">crit</span> <span class="o">=</span> <span class="n">Criteria</span><span class="o">.</span><span class="n">with_field</span><span class="p">(</span><span class="s1">&#39;notes.my-field&#39;</span><span class="p">,</span> <span class="n">Matcher</span><span class="o">.</span><span class="n">exists</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools.pulplib.Matcher.in_">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">in_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Matcher.in_"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Matcher.in_" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a matcher for a field whose value equals one of the specified
input values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>values</strong> (<em>iterable</em>) – An iterable of values used to match a field.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Would match any Repository where notes.my-field is &quot;a&quot;, &quot;b&quot; or &quot;c&quot;</span>
<span class="n">crit</span> <span class="o">=</span> <span class="n">Criteria</span><span class="o">.</span><span class="n">with_field</span><span class="p">(</span>
    <span class="s1">&#39;notes.my-field&#39;</span><span class="p">,</span>
    <span class="n">Matcher</span><span class="o">.</span><span class="n">in_</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools.pulplib.Matcher.less_than">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">less_than</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/criteria.html#Matcher.less_than"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Matcher.less_than" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a matcher for a field whose value is less than the specified input
value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – An object to match against the field</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># would match where last_publish is before &quot;2019-08-27T00:00:00Z&quot;</span>
<span class="c1"># date comparison requires a datetime.datetime object</span>
<span class="n">crit</span> <span class="o">=</span> <span class="n">Criteria</span><span class="o">.</span><span class="n">with_field</span><span class="p">(</span>
    <span class="s1">&#39;last_publish&#39;</span><span class="p">,</span>
    <span class="n">Matcher</span><span class="o">.</span><span class="n">less_than</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pubtools.pulplib.Page">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pubtools.pulplib.</span></span><span class="sig-name descname"><span class="pre">Page</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">NOTHING</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">next</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><span class="pre">concurrent.futures._base.Future</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pubtools/pulplib/_impl/page.html#Page"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools.pulplib.Page" title="Permalink to this definition">¶</a></dt>
<dd><p>A page of Pulp search results.</p>
<p>All Pulp searches issued by this library are paginated.
Instances of this class may be used to iterate through the returned
pages, in both blocking and non-blocking coding styles.</p>
<p>Page objects are iterables. Iterating over a page will iterate
over all data within that page, <em>and all subsequent pages</em>,
blocking on more data from Pulp as needed.</p>
<p class="rubric">Examples</p>
<p><strong>Non-blocking iteration</strong></p>
<p>This example sets up non-blocking processing of all results from
a search query. Futures are chained and composed using
<a class="reference external" href="https://rohanpm.github.io/more-executors/reference/futures-map.html#more_executors.futures.f_flat_map" title="(in more-executors v2.9.0, revision 2a92eb0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">f_flat_map()</span></code></a> and friends.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">handle_results</span><span class="p">(</span><span class="n">page</span><span class="p">):</span>
    <span class="c1"># Returns a future for handling of a single page</span>
    <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
        <span class="n">do_something</span><span class="p">(</span><span class="n">repo</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">next</span><span class="p">:</span>
        <span class="c1"># There&#39;s more data, handle that too when it&#39;s ready</span>
        <span class="k">return</span> <span class="n">f_flat_map</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">next</span><span class="p">,</span> <span class="n">handle_results</span><span class="p">)</span>
    <span class="c1"># No more data, we&#39;re done</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Handled results!&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">f_return</span><span class="p">()</span>

<span class="n">page_f</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">search_repository</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">handled_f</span> <span class="o">=</span> <span class="n">f_flat_map</span><span class="p">(</span><span class="n">page_f</span><span class="p">,</span> <span class="n">handle_results</span><span class="p">)</span>
<span class="c1"># handled_f will be resolved when all results are handled</span>
</pre></div>
</div>
<p><strong>Blocking iteration</strong></p>
<p>This example uses the page as an iterable to loop over all search
results. At certain points during the iteration, blocking may
occur to await more pages from Pulp.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">page</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">search_repository</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="c1"># processes all data, but may block at page boundaries</span>
<span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">page</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">repo</span><span class="p">)</span>
</pre></div>
</div>
<p>Method generated by attrs for class Page.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pubtools.pulplib.Page.data">
<span class="sig-name descname"><span class="pre">data</span></span><a class="headerlink" href="#pubtools.pulplib.Page.data" title="Permalink to this definition">¶</a></dt>
<dd><p>List of Pulp objects in this page.</p>
<p>This list will contain instances of the appropriate Pulp object type
(e.g. <a class="reference internal" href="pulpcore.html#pubtools.pulplib.Repository" title="pubtools.pulplib.Repository"><code class="xref py py-class docutils literal notranslate"><span class="pre">Repository</span></code></a> for a repository search).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pubtools.pulplib.Page.next">
<span class="sig-name descname"><span class="pre">next</span></span><a class="headerlink" href="#pubtools.pulplib.Page.next" title="Permalink to this definition">¶</a></dt>
<dd><p>None, if this is the last page of results.</p>
<p>Otherwise, a Future[<a class="reference internal" href="#pubtools.pulplib.Page" title="pubtools.pulplib.Page"><code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code></a>] for the next page of results.</p>
</dd></dl>

</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">pubtools-pulplib</a></h1>



<p class="blurb">A Pulp library for publishing tools</p>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="client.html">API: client</a></li>
<li class="toctree-l1"><a class="reference internal" href="pulpcore.html">API: core</a></li>
<li class="toctree-l1"><a class="reference internal" href="yum.html">API: yum</a></li>
<li class="toctree-l1"><a class="reference internal" href="files.html">API: files</a></li>
<li class="toctree-l1"><a class="reference internal" href="containers.html">API: containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="maintenance.html">API: maintenance</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API: searching</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">API: testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schema.html">Schemas</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://github.com/release-engineering/pubtools-pulplib">Source</a></li>
    
    <li class="toctree-l1"><a href="https://pypi.org/project/pubtools-pulplib">PyPI</a></li>
    
    <li class="toctree-l1"><a href="https://release-engineering.github.io/pubtools-pulplib/genindex.html">Index</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="maintenance.html" title="previous chapter">API: maintenance</a></li>
      <li>Next: <a href="testing.html" title="next chapter">API: testing</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Red Hat.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/api/searching.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/release-engineering/pubtools-pulplib" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>