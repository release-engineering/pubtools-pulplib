
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Schemas &#8212; pubtools-pulplib  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Logging" href="logging.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="schemas">
<span id="id1"></span><h1>Schemas<a class="headerlink" href="#schemas" title="Permalink to this headline">¶</a></h1>
<p>This document shows the schemas for Pulp data understood by this library,
in <a class="reference external" href="https://json-schema.org/">JSON schema</a> format.</p>
<p>These schemas may be useful when providing data to the
<a class="reference internal" href="api/pulpcore.html#pubtools.pulplib.PulpObject.from_data" title="pubtools.pulplib.PulpObject.from_data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_data()</span></code></a> methods, or as a general
reference.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#repository" id="id2">Repository</a></p></li>
<li><p><a class="reference internal" href="#task" id="id3">Task</a></p></li>
<li><p><a class="reference internal" href="#unit" id="id4">Unit</a></p></li>
<li><p><a class="reference internal" href="#maintenance" id="id5">Maintenance</a></p></li>
</ul>
</div>
<section id="repository">
<h2><a class="toc-backref" href="#id2">Repository</a><a class="headerlink" href="#repository" title="Permalink to this headline">¶</a></h2>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span>title: pulp2-repository

description: &gt;-
  Schema for a Pulp 2.x repository dict, as returned by the
  /pulp/api/v2/repositories/&lt;repo_id&gt;/ API.

$schema: http://json-schema.org/draft-07/schema#

definitions:
  # A repository distributor (yum_distributor, iso_distributor...)
  distributor:
    type: object
    properties:
      id:
        # String ID of distributor, e.g. &quot;yum_distributor&quot;
        type: string
      distributor_type_id:
        # String ID of distributor&#39;s type, e.g. &quot;yum_distributor&quot;
        type: string
      repo_id:
        # String ID of distributor&#39;s repository
        type: string
      config:
        # Config dict for this distributor, different per distributor type.
        # We won&#39;t mandate which config keys are used with each distributor,
        # but if they&#39;re present, we&#39;ll validate them
        type: object
        properties:
          # Publish path for this URL, relative to Pulp/CDN root
          relative_url:
            type: string
          # True if rsync of repodata should be skipped
          skip_repodata:
            type: boolean

      # An ISO8601 timestamp for the last time this distributor was published.
      last_publish:
        anyOf:
        - type: &quot;null&quot;
        - type: string
          # example: 2019-06-05T11:56:50Z
          pattern: &quot;^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}Z&quot;

    required:
    - id
    - distributor_type_id

type: object

properties:

  # ID of the repo, e.g. &quot;my-repo&quot;, &quot;zoo&quot;.
  # Note this is different from _id, which is the mongo document ID.
  id:
    type: string

  # Repository notes.
  # This is a dict where any keys/values may be stored.
  notes:
    type: object

    properties:

      # Identifier for repository type, e.g. &quot;iso-repo&quot;, &quot;rpm-repo&quot;
      _repo-type:
        type: string

      # An ISO8601 timestamp for creation of this repo.
      # Note that this field is not set by Pulp itself.  Only certain tools
      # are expected to initialize this field when creating a repo.
      created:
        type: string
        # example: 2019-06-05T11:56:50Z
        pattern: &quot;^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}Z&quot;

      # Comma-separated GPG public key IDs, used for signing content in
      # this repository.
      signatures:
        type: string

      # True if this is considered a temporary repository, created for
      # use during certain workflows and deleted later
      pub_temp_repo:
        type: boolean

      # True if repository supposed to be populated from repositories
      # mentioned in population_sources
      ubi_population:
        type: boolean

      # List of repositories used for populating the repository
      population_sources:
        type: array
        items:
          type: string

      # Name of content set that is associated with this repository
      content_set:
        type: string

      # Version of ubi config that should be used for population of this repository
      ubi_config_version:
        type: string

  # List of repository distributors.
  # Note that order matters in this list.
  distributors:
    type: array
    items:
      $ref: &quot;#/definitions/distributor&quot;

required:
- id
</pre></div>
</div>
</section>
<section id="task">
<h2><a class="toc-backref" href="#id3">Task</a><a class="headerlink" href="#task" title="Permalink to this headline">¶</a></h2>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span>title: pulp2-task

description: &gt;-
  Schema for a Pulp 2.x task dict, as returned by the
  /pulp/api/v2/tasks/&lt;task_id&gt;/ API.

$schema: http://json-schema.org/draft-07/schema#

definitions:
  # An error object
  # https://docs.pulpproject.org/dev-guide/conventions/exceptions.html#error-details
  error:
    type: object
    properties:

      # Short identifier of error, e.g. PLP0018
      code:
        type: string

      # Summary of error for end-user
      description:
        type: string

      # Arbitrary key-value data, different per error code
      data:
        type: object

    required:
    - code
    - description

type: object

properties:

  # ID of the task, e.g. &quot;7744e2df-39b9-46f0-bb10-feffa2f7014b&quot;
  task_id:
    type: string

  # Task state
  state:
    enum:
    - accepted  # this value has never been observed
    - running   # task is being worked on
    - waiting   # task is waiting for a worker to pick it up
    - finished  # task completed successfully
    - error     # task completed unsuccessfully
    - canceled  # task was canceled
    - skipped   # Pulp decided not to execute this task

  # The error - only non-null for failed tasks
  error:
    anyOf:
    - type: &quot;null&quot;
    - $ref: &quot;#/definitions/error&quot;

  # Python traceback if an exception was raised - a single multi-line string
  traceback:
    anyOf:
    - type: &quot;null&quot;
    - type: string

  # Tags of a task; a list of arbitrary strings
  tags:
    type: array
    items:
      type: string

  # Task result. The content depends on the task type.
  result:
    anyOf:

    # If it&#39;s not an object, we don&#39;t care what it is, just accept it.
    - not:
        type: object

    # If it is an object, we will validate some inner fields.
    - type: object
      properties:
        # For tasks operating on units (e.g. assoc/unassoc), this element
        # in the result will record which unit(s) were affected.
        units_successful:
          type: array
          items:
            type: object
            properties:
              type_id:
                type: string
              unit_key:
                type: object
            required:
            - type_id
            - unit_key

required:
- task_id
- state
</pre></div>
</div>
</section>
<section id="unit">
<h2><a class="toc-backref" href="#id4">Unit</a><a class="headerlink" href="#unit" title="Permalink to this headline">¶</a></h2>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span>title: pulp2-unit

description: &gt;-
  Schema for a Pulp 2.x unit, as returned by content search API.

$schema: http://json-schema.org/draft-07/schema#

definitions:
  # ISO units (generic file)
  iso:
    type: object

    properties:
      # Type of the unit, e.g. &quot;iso&quot;, &quot;rpm&quot;, &quot;srpm&quot;, &quot;erratum&quot; ...
      _content_type_id:
        const: iso

      # Filename (actually path)
      name:
        type: string

      # SHA256 checksum
      checksum:
        type: string
        pattern: &quot;^[a-f0-9]{64}$&quot;

      # Size in bytes
      size:
        # Ideally would be &#39;integer&#39;, but some old units have been stored
        # as non-integers, e.g.
        # RHEL4-U5-ia64-source-disc2.iso =&gt; 512251904.0
        type: number

      repository_memberships:
        type: array
        items:
          type: string

    required:
    - _content_type_id
    - name
    - checksum
    - size

  # RPM units
  rpm:
    type: object

    properties:
      # Type of the unit
      _content_type_id:
        enum:
        - rpm
        - srpm

      # ENVR components
      name:
        type: string
      epoch:
        type: string
      version:
        type: string
      release:
        type: string

      # Architecture
      arch:
        type: string

      # Filename of the rpm
      filename:
        anyOf:
        - type: string
        - type: &quot;null&quot;

      # source rpm filename
      sourcerpm:
        anyOf:
        - type: string
        - type: &quot;null&quot;

      # Short ID of key used to sign this RPM
      signing_key:
        anyOf:
        - type: string
        - type: &quot;null&quot;

      # Checksums in key/value pairs (key=algorithm, value=hex string).
      # All checksums are optional.
      checksums:
        type: object
        properties:
          md5:
            type: string
            pattern: &quot;^[a-f0-9]{32}$&quot;
          sha1:
            type: string
            pattern: &quot;^[a-f0-9]{40}$&quot;
          sha256:
            type: string
            pattern: &quot;^[a-f0-9]{64}$&quot;

      # SHA256 checksum.
      # This duplicates checksums.sha256 above; the difference is that this field
      # is a part of the unit key, so it&#39;s both mandatory &amp; indexed.
      # Also, though the original intent was probably to support multiple checksum
      # types in this field, it is nowadays forced to sha256, see:
      # https://github.com/pulp/pulp_rpm/blob/69759d0fb9a16c0a47b1f49c78f6712e650912e1/plugins/pulp_rpm/plugins/importers/yum/upload.py#L436
      checksum:
        type: string
        pattern: &quot;^[a-f0-9]{64}$&quot;

      repository_memberships:
        type: array
        items:
          type: string

      requires:
        type: array
        items:
          type: object

      provides:
        type: array
        items:
          type: object


    required:
    - _content_type_id
    - name
    - epoch
    - version
    - release
    - arch

  # modulemd units
  modulemd:
    type: object

    properties:
      # Type of the unit
      _content_type_id:
        const: modulemd

      # NSVCA components
      name:
        type: string
      stream:
        type: string
      version:
        type: integer
      context:
        type: string
      arch:
        type: string

      repository_memberships:
        type: array
        items:
          type: string

      artifacts:
        type: array
        items:
          type: string

      profiles:
        type: object

      dependencies:
        type: array
        items:
          type: object

    required:
    - _content_type_id
    - name
    - stream
    - version
    - context
    - arch


  # modulemd_defaults units
  modulemd_defaults:
    type: object

    properties:
      # Type of the unit
      _content_type_id:
        const: modulemd_defaults

      name:
        type: string
      repo_id:
        type: string
      stream:
        type: string
      profiles:
        type: object

      repository_memberships:
        type: array
        items:
          type: string

    required:
    - _content_type_id
    - name
    - repo_id

  # Schema for any unknown type of unit
  unknown:
    type: object

    properties:
      # Type of the unit. Since this is the catch-all schema for unknown unit types,
      # this must be a type not included in one of the other schemas.
      _content_type_id:
        allOf:
        - type: string
        - not:
            enum:
            - iso
            - rpm
            - srpm
            - modulemd
            - modulemd_defaults

    required:
    - _content_type_id

anyOf:
- $ref: &quot;#/definitions/iso&quot;
- $ref: &quot;#/definitions/rpm&quot;
- $ref: &quot;#/definitions/modulemd&quot;
- $ref: &quot;#/definitions/modulemd_defaults&quot;
- $ref: &quot;#/definitions/unknown&quot;
</pre></div>
</div>
</section>
<section id="maintenance">
<h2><a class="toc-backref" href="#id5">Maintenance</a><a class="headerlink" href="#maintenance" title="Permalink to this headline">¶</a></h2>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span>title: maintenance report

description: &gt;-
  Schema for the maintenance report JSON file.
  This is a custom file used on release-engineering Pulp servers to flag repositories
  as being in &quot;maintenance mode&quot;, meaning that external publishes are not allowed.

$schema: http://json-schema.org/draft-07/schema#

definitions:
  # details of maintenance
  details:
    type: object
    properties:
      # Why this repo is in maintenance mode
      message:
        type: string
      # Who set it to maintenance
      owner:
        type: string
      # An ISO8601 timestamp for when did the maintenance start for this repo
      started:
        type: string
        pattern: &quot;^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}Z&quot;

type: object

properties:
  # An ISO8601 timestamp for when this report was updated last time
  last_updated:
    type: string
    pattern: &quot;^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}Z&quot;

  # The person who updated maintenance repo last time
  last_updated_by:
    type: string

  # repo_id: details pairs, indicate which repo is in maintenance mode
  # with details.
  repos:
    type: object
    patternProperties:
      &quot;.*&quot;:
        $ref: &quot;#/definitions/details&quot;
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pubtools-pulplib</a></h1>



<p class="blurb">A Pulp library for publishing tools</p>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api/client.html">API: client</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/pulpcore.html">API: core</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/yum.html">API: yum</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/files.html">API: files</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/containers.html">API: containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/maintenance.html">API: maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/searching.html">API: searching</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/testing.html">API: testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Schemas</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://github.com/release-engineering/pubtools-pulplib">Source</a></li>
    
    <li class="toctree-l1"><a href="https://pypi.org/project/pubtools-pulplib">PyPI</a></li>
    
    <li class="toctree-l1"><a href="https://release-engineering.github.io/pubtools-pulplib/genindex.html">Index</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="logging.html" title="previous chapter">Logging</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Red Hat.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/schema.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/release-engineering/pubtools-pulplib" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>